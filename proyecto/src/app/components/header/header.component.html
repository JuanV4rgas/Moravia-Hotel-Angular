<header class="site-header">
  <!-- Botón hamburguesa (lado izquierdo) -->
  <button
    class="hamburger"
    type="button"
    data-bs-toggle="offcanvas"
    data-bs-target="#offcanvasWithBothOptions"
    aria-controls="offcanvasWithBothOptions"
  >
    <span></span><span></span><span></span>
  </button>

  <!-- Logo + título (centro/izquierda) -->
  <div class="logo">
    <a routerLink="/"><img src="assets/img/logo_gray.png" alt="Logo" /></a>
    <a class="titulo-logo" routerLink="/"
      ><img src="assets/img/title_gray.png" alt="Title"
    /></a>
  </div>

  <!-- Botones del lado derecho -->
  <div class="header-buttons">
    <!-- Botón según tipo de usuario -->
    <button
      class="button2"
      *ngIf="authenticated && usuario?.tipo === 'cliente'"
      routerLink="/reserva/nueva"
    >
      Reservar
    </button>

    <div
      class="dropdown"
      *ngIf="authenticated && usuario?.tipo === 'trabajador'"
    >
      <button
        class="button2 dropdown-toggle"
        type="button"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        Crear
      </button>
      <ul class="dropdown-menu dropdown-menu-end">
        <li>
          <button class="dropdown-item" routerLink="/room/nueva">
            Habitacion
          </button>
        </li>
        <li>
          <button class="dropdown-item" routerLink="/roomtype/nueva">
            Tipo de Habitacion
          </button>
        </li>
        <li>
          <button class="dropdown-item" routerLink="/servicio/nueva">
            Servicio
          </button>
        </li>
      </ul>
    </div>

    <button
      class="button2"
      *ngIf="authenticated && usuario?.tipo === 'trabajador'"
      routerLink="/consultar"
    >
      Consultar
    </button>

    <!-- Si NO está autenticado -->
    <div *ngIf="!authenticated">
      <button class="button2" routerLink="/auth">Login</button>
    </div>

    <!-- Si está autenticado -->
    <app-user-dropdown
      *ngIf="authenticated"
      [usuario]="usuario"
      [logoutFn]="logout.bind(this)"
    ></app-user-dropdown>
  </div>

  <!-- Offcanvas DESDE LA IZQUIERDA Y ALTURA COMPLETA -->
  <app-hamburger></app-hamburger>

  <!-- Mensajes de estado -->
  <div
    *ngIf="loginSuccess"
    class="alert alert-success alert-dismissible fade show position-fixed notification-message"
    [ngClass]="{ 'fade-out': loginFadeOut }"
    style="top: 80px; right: 20px; z-index: 9999"
    role="alert"
  >
    ¡Bienvenido! Has iniciado sesión correctamente.
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>

  <div
    *ngIf="logoutSuccess"
    class="alert alert-info alert-dismissible fade show position-fixed notification-message"
    [ngClass]="{ 'fade-out': logoutFadeOut }"
    style="top: 80px; right: 20px; z-index: 9999"
    role="alert"
  >
    Sesión cerrada correctamente.
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
</header>
