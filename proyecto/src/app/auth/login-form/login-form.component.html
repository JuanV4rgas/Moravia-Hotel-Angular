<form (ngSubmit)="onLogin()" [formGroup]="loginForm" novalidate>
  <!-- Mensaje de error -->
  <div class="alert error" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <div class="field">
    <label for="correo">Correo*</label>
    <input
      id="correo"
      formControlName="email"
      type="email"
      required
      placeholder="tu@correo.com"
    />
    <div class="error-message" *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
      <span *ngIf="loginForm.get('email')?.errors?.['required']">El correo es requerido.</span>
      <span *ngIf="loginForm.get('email')?.errors?.['email']">Ingresa un correo válido.</span>
    </div>
  </div>

  <div class="field">
    <label for="clave">Contraseña*</label>
    <input
      id="clave"
      formControlName="clave"
      type="password"
      required
      placeholder="••••••••"
    />
    <div class="error-message" *ngIf="loginForm.get('clave')?.invalid && loginForm.get('clave')?.touched">
      <span *ngIf="loginForm.get('clave')?.errors?.['required']">La contraseña es requerida.</span>
    </div>
  </div>

  <div class="field captcha-field">
    <re-captcha
      [siteKey]="siteKey"
      (resolved)="onCaptchaResolved($event)">
    </re-captcha>
    <div class="error-message" *ngIf="captchaError">{{ captchaError }}</div>
  </div>

  <div class="actions">
    <button 
      class="btn" 
      type="submit" 
      [disabled]="isLoading || loginForm.invalid"
    >
      {{ isLoading ? 'Entrando...' : 'Entrar' }}
    </button>
    
    <button 
      class="btn btn--outline" 
      type="button"
      (click)="cambiarARegistro()"
      [disabled]="isLoading"
    >
      Crear cuenta
    </button>

    <p class="muted" style="margin-top: 10px">
      ¿Olvidaste tu contraseña? <a routerLink="/recuperar">Recuperarla</a>
    </p>
  </div>
</form>
